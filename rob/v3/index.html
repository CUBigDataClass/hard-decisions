<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>Hard Decisions</title>
<style>
	body{
		background: #ecf0f1;
	}
	.chart{
		width:100%;
	}
	.chart div {
	  font: 10px sans-serif;
	  background-color: #2c3e50;
	  text-align: right;
	  padding: 3px;
	  margin: 3px;
	  color: white;
	}
	.chart div:hover{
		background-color: #3498db;
	}
</style>
</head>
<body>
	<!-- chart to render d3 -->
	<div class="chart"></div>
	<!-- import local d3 -->
	<script src="d3/d3.min.js"></script>
	<!-- begin d3 script -->
	<script>
	var data;
	//get json data, everything that uses this data must be in this function
	d3.json("data.json", function(error, json){
		if (error){
			console.log(error);
		} 
		else {
			console.log(json);
		}
		//set our var to the data
		data=json;
		//set the scales to match our data
		var x = d3.scale.linear()
	    .domain([0, function(d){
	    	return d3.max(d.Total)
	    }])
	    .range([0, function(d){
	    	return d3.max(d.Total)
	    }]);
	    //start drawing graph
	    var chart = d3.select(".chart")
		chart.selectAll("div")
			//bind data
		    .data(data)
		  	.enter().append("div")
		    .style("width", function(d) { 
		    	//responsive bars to match width of box
		    	return ((d.Complete/d.Total)*100) + "%";
		    })
		    .text(function(d) {
		    	//write out text in box
		    	return d.Color + ": " + d.Complete + "/" + d.Total;
		    })
		    //style the text
		    .style("color","white")
		   	.style("height", "23px")
		   	.style("font-size", "1.5em")		 	
		   	.on("mouseover", function(d){
		   		//on hover return the percent of clicks
		   		d3.select(this)
		   			.text(function(d){
			   		  	//be sure to round it so there aren't crazy fractions
			   		  	var percent = d.Complete/d.Total;
			   		  	round = Math.round(percent*100);
			   		  	return d.Color + ": " + round + "%";
			   		  })
			})
		   	.on("mouseout", function(d){
		   		//on not hover return to original text
		   		d3.select(this)
		   			.text(function(d){
		    			return d.Color + ": " + d.Complete + "/" + d.Total;
			   		})
		   	})
	});// end JSON function
	</script>
</body>